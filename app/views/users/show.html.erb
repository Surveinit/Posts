<h1>Users#show</h1>

<p>Hi <%= @user.email %> </p>
<p>Followers:<%= @user.followers.count %></p>      
<p>Following:<%= @user.following.count %></p>      
<p>Since: <%= @user.created_at%></p> <br>

<% unless current_user == @user %>  <%# This is the key change %>
  <% if current_user.following?(@user) %>
    <%= button_to "Unfollow", unfollow_user_path(@user), method: :delete, params: { user_id: @user.id } %>
  <% else %>
    <%= button_to "Follow", follow_user_path(@user), method: :post, params: { user_id: @user.id } %>
  <% end %>
<% end %>

<ul>
  <% if @user.posts.any? %>
    <% @user.posts.each do |post| %>
      <%= link_to post.content, post_path(post) %> <br>

    <% end %>
  <% else %>
    <p>No Posts</p>
  <% end %>
</ul>
